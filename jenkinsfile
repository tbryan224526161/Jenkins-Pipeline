pipeline {
    agent any
    
    environment {
        DIRECTORY_PATH = '/home/jenkins'
        TESTING_ENVIRONMENT = 'Ansible'
        PRODUCTION_ENVIRONMENT = 'AWS CodeDeploy'
    }
    
    stages {
        stage('Build'){
            steps {
                echo "Stage: Build"
                echo "Tool: Maven"
                
            }
        }
        stage('Unit and Integration Tests'){
            steps {
                echo "Stage: Unit & Integration Tests"
                echo "Tool: JUnit"
            }
        }
        stage('Code Analysis'){
            steps {
                echo "Stage: Code Analysis"
                echo "Tool: SonarQube"
            }
        }
        stage('Security Scan'){
            steps {
                echo "Stage: Security Scan"
                echo "Tool: OWASP Dependency-Check"
            }
        }
        stage('Deploy to Staging'){
            steps {
                echo "Deploy to Staging"
                echo "Deploying the application to ${env.TESTING_ENVIRONMENT}"
            }
        }
        stage('Integration Tests on Staging'){
            steps {
                echo "Stage: Integration Tests on Staging"
                echo "Tool: Mabl"
            }
        }
        stage('Deploy to Production'){
            steps {
                echo "Stage: Deploy to Production"
                echo "Deploying code to the ${env.PRODUCTION_ENVIRONMENT} environment"
            }
        }
        
    }
            post{
                success{
                    script {
                        emailext(
                    to: "tim.bryan.87@gmail.com",
                    subject: "Jenkins-Pipeline - Build status email",
                    body: "Build was successful!",
                    attachLog: true
                        )
                    }
                }
            }

}






pipeline {
    agent any
    
    environment {
        DIRECTORY_PATH = '/home/jenkins'
        TESTING_ENVIRONMENT = 'Staging'
        PRODUCTION_ENVIRONMENT = 'Tim Bryan'
    }
    
    stages {
        stage('Build'){
            steps {
                echo "Fetching the source code from ${env.DIRECTORY_PATH}"
                echo "Compile the code and generate any necessary artefacts"
            }
            post{
                success{
                    script {
                        emailext(
                    to: "tim.bryan.87@gmail.com",
                    subject: "Build status email",
                    body: "Build was successful!",
                    attachLog: true
                        )
                    }
                }
            }
        }
        stage('Test'){
            steps {
                echo "Unit tests"
                echo "Integration tests"
            }
        }
        stage('Code Quality Check'){
            steps {
                echo "Checking the quality of the code"
            }
        }
        stage('Deploy'){
            steps {
                echo "Deploying the application to ${env.TESTING_ENVIRONMENT}"
            }
        }
        stage('Approval'){
            steps {
                sleep 10
            }
        }
        stage('Deploy to Production'){
            steps {
                echo "Deploying code to the ${env.PRODUCTION_ENVIRONMENT} environment"
            }
        }
        
    }

}

